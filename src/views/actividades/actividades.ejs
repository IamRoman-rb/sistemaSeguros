<!DOCTYPE html>
<html lang="en">
    <%- include("../partials/head") %>
<body>
    <%- include("../partials/header") %>
    <main>
        <header>
            <h1>Actividades</h1>
            <form action="" method="get">
                <fieldset>
                    <label for="fecha">Fecha</label>
                    <input type="date" name="fecha" id="fecha">
                </fieldset>
                <fieldset>
                    <label for="actividad">Actividad</label>
                    <select name="actividad" id="actividad">
                        <option value="." selected>.</option>
                        <option value="pago">Pago</option>
                        <option value="poliza">Poliza</option>
                        <option value="movimiento">Movimiento</option>
                        <option value="cliente">Cliente</option>
                    </select>
                </fieldset>
                <button type="submit">Filtrar</button>
            </form>
        </header>
        <ul>
            <% actividades.forEach(actividad => { %>
                <% if (actividad.tipo == 'cliente') { %>
                    <li>
                        <dl>
                            <dt>Fecha</dt>
                            <dd><%= actividad.fecha %></dd>
                        </dl>
                        <dl>
                            <dt>Hora</dt>
                            <dd><%= actividad.hora %></dd>
                        </dl>
                        <dl>
                            <dt>Nombre</dt>
                            <dd><%= actividad.cliente?.nombre || 'No especificado' %></dd>
                        </dl>
                        <dl>
                            <dt>Accion</dt>
                            <dd><%= actividad.accion %></dd>
                        </dl>
                        <dl>
                            <dt>Usuario</dt>
                            <dd><%= actividad.usuario?.nombre || 'No especificado' %></dd>
                        </dl>
                    </li>
                <% } %>
                <% if (actividad.tipo == 'pago') { %>
                    <li>
                        <dl>
                            <dt>Fecha</dt>
                            <dd><%= actividad.fecha %></dd>
                        </dl>
                        <dl>
                            <dt>Hora</dt>
                            <dd><%= actividad.hora %></dd>
                        </dl>
                        <dl>
                            <dt>Accion</dt>
                            <dd><%= actividad.accion %></dd>
                        </dl>
                        <dl>
                            <dt>Cliente</dt>
                            <dd><%= actividad.pago?.cliente?.nombre || 'No especificado' %></dd>
                        </dl>
                        <dl>
                            <dt>Monto</dt>
                            <dd>
                                <%= new Intl.NumberFormat("es-AR", { style: 'currency', currency: 'ARS' }).format(actividad.pago?.valor || 0) %>
                            </dd>
                        </dl>
                        <dl>
                            <dt>Usuario</dt>
                            <dd><%= actividad.usuario?.nombre || 'No especificado' %></dd>
                        </dl>
                    </li>
                <% } %>
                <% if (actividad.tipo == 'poliza') { %>
                    <li>
                        <dl>
                            <dt>Fecha</dt>
                            <dd><%= actividad.fecha %></dd>
                        </dl>
                        <dl>
                            <dt>Hora</dt>
                            <dd><%= actividad.hora %></dd>
                        </dl>
                        <dl>
                            <dt>Accion</dt>
                            <dd><%= actividad.accion %></dd>
                        </dl>
                        <% if (actividad.poliza?.patente) { %>
                            <dl>
                                <dt>Patente</dt>
                                <dd><%= actividad.poliza.patente %></dd>
                            </dl>
                        <% } %>
                        <% if (actividad.poliza?.modelo) { %>
                            <dl>
                                <dt>Veh√≠culo</dt>
                                <dd><%= actividad.poliza.modelo %></dd>
                            </dl>
                        <% } %>
                        <% if (actividad.poliza?.tipo_poliza) { %>
                            <dl>
                                <dt>Tipo Riesgo</dt>
                                <dd><%= actividad.poliza.tipo_poliza %></dd>
                            </dl>
                        <% } %>
                        <% if (actividad.poliza?.cliente) { %>
                            <dl>
                                <dt>Cliente</dt>
                                <dd><%= actividad.poliza.cliente.nombre %></dd>
                            </dl>
                        <% } %>
                        <dl>
                            <dt>Usuario</dt>
                            <dd><%= actividad.usuario?.nombre || 'No especificado' %></dd>
                        </dl>
                    </li>
                <% } %>
                <% if (actividad.tipo == 'movimiento') { %>
                    <li>
                        <dl>
                            <dt>Fecha</dt>
                            <dd><%= actividad.fecha %></dd>
                        </dl>
                        <dl>
                            <dt>Hora</dt>
                            <dd><%= actividad.hora %></dd>
                        </dl>
                        <dl>
                            <dt>Accion</dt>
                            <dd><%= actividad.accion %></dd>
                        </dl>
                        <dl>
                            <dt>Usuario</dt>
                            <dd><%= actividad.usuario?.nombre || 'No especificado' %></dd>
                        </dl>
                    </li>
                <% } %>
                <% if (actividad.tipo == 'auxiliares') { %>
                    <li>
                        <dl>
                            <dt>Fecha</dt>
                            <dd><%= actividad.fecha %></dd>
                        </dl>
                        <dl>
                            <dt>Hora</dt>
                            <dd><%= actividad.hora %></dd>
                        </dl>
                        <dl>
                            <dt>Accion</dt>
                            <dd><%= actividad.accion %></dd>
                        </dl>
                        <dl>
                            <dt>Usuario</dt>
                            <dd><%= actividad.usuario?.nombre || 'No especificado' %></dd>
                        </dl>
                    </li>
                <% } %>
            <% }) %>
        </ul>
    </main>
</body>